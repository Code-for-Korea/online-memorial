{"ast":null,"code":"import _regeneratorRuntime from\"/home/swimmingkiim/Documents/Code-For-Korea/online-memorial/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/swimmingkiim/Documents/Code-For-Korea/online-memorial/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/swimmingkiim/Documents/Code-For-Korea/online-memorial/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useCallback,useEffect,useState}from\"react\";import DataTableRow from\"../../../../components/dataTable/DataTableRow\";import styles from\"./style.module.css\";import FlexColumn from\"../../../../components/common/FlexColumn\";import Pagination from\"../../../../components/pagination/Pagination\";import Container from\"../../../../components/common/Container\";import DataService from\"../../../../services/data.service\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MemorialDataTable=function MemorialDataTable(){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),postPageNum=_useState2[0],setPostPageNum=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),totalPageNum=_useState4[0],setTotalPageNum=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),dataTableList=_useState6[0],setDataTableList=_useState6[1];var getDataTableList=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(pageNum){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return DataService.getDataTable(pageNum!==null&&pageNum!==void 0?pageNum:postPageNum);case 2:data=_context.sent;if(data!==null){setTotalPageNum(data[\"meta\"][\"total_pages\"]);setDataTableList(data[\"disasters\"].map(function(accident){var date=new Date(Date.parse(accident[\"happened_on\"].toString()));return{date:\"\".concat(date.toLocaleString('ko-KR',dateFormatOption).slice(0,-1),\"/\").concat(WEEKDAY[date.getDay()]),deathCount:accident[\"death\"],injuredCount:accident[\"injury\"],district:accident[\"area\"],accidentType:accident[\"category\"],articleUrl:accident[\"url\"]};}));}case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),[postPageNum]);useEffect(function(){getDataTableList(postPageNum);},[postPageNum]);var headerList=[\"사고날짜/요일\",\"사망\",\"부상\",\"도시(행정구역)\",\"사고유형\",\"세부내용\"];var updatePostPageNum=useCallback(function(newPageNum){setPostPageNum(newPageNum);},[]);return/*#__PURE__*/_jsxs(FlexColumn,{children:[/*#__PURE__*/_jsxs(\"table\",{className:styles[\"memorial-data-table\"],children:[/*#__PURE__*/_jsx(\"thead\",{className:styles[\"memorial-data-table--header\"],children:/*#__PURE__*/_jsx(\"tr\",{className:styles[\"memorial-data-table--header-row\"],children:headerList.map(function(text){return/*#__PURE__*/_jsx(\"th\",{className:styles[\"memorial-data-table--header-cell\"],children:text},\"memorial-data-table-header-\".concat(text));})})}),/*#__PURE__*/_jsx(\"tbody\",{children:dataTableList.map(function(data,idx){return/*#__PURE__*/_jsx(\"tr\",{children:Object.keys(data).map(function(key){return/*#__PURE__*/_jsx(DataTableRow,{content:key===\"articleUrl\"?/*#__PURE__*/_jsx(\"a\",{className:styles[\"memorial-data-table--body-link\"],rel:\"noreferrer\",target:\"_blank\",href:data[key],children:/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+\"/assets/icon/ic-link.svg\",alt:\"\\uAE30\\uC0AC \\uBCF4\\uB7EC\\uAC00\\uAE30\",className:styles[\"memorial-data-table--body-link-icon\"]})}):\"\".concat(data[key])},\"memorial-data-table-r\".concat(idx,\"c\").concat(key));})},\"memorial-data-table-r\".concat(idx));})})]}),/*#__PURE__*/_jsx(Container,{style:styles[\"memorial-data-table--pagination__wrapper\"],children:/*#__PURE__*/_jsx(Pagination,{onPageChange:updatePostPageNum,lastPage:totalPageNum,initialPageNum:postPageNum})})]});};export default MemorialDataTable;export var WEEKDAY=[\"일\",\"월\",\"화\",\"수\",\"목\",\"금\",\"토\"];export var dateFormatOption={year:\"numeric\",month:\"numeric\",day:\"numeric\"};","map":null,"metadata":{},"sourceType":"module"}