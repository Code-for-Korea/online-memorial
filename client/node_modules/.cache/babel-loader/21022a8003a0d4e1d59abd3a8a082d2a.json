{"ast":null,"code":"var _jsxFileName = \"/home/swimmingkiim/Documents/Code-For-Korea/online-memorial/client/src/views/MemorialMainContent/MemorialInfomations/MemorialDataTable/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport DataTableRow from \"../../../../components/dataTable/DataTableRow\";\nimport styles from \"./style.module.css\";\nimport FlexColumn from \"../../../../components/common/FlexColumn\";\nimport Pagination from \"../../../../components/pagination/Pagination\";\nimport Container from \"../../../../components/common/Container\";\nimport DataService from \"../../../../services/data.service\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MemorialDataTable = () => {\n  _s();\n\n  const [postPageNum, setPostPageNum] = useState(1);\n  const [totalPageNum, setTotalPageNum] = useState(1);\n  const perPage = 10;\n  const [dataTableList, setDataTableList] = useState([]);\n  const initializeDataTableList = useCallback(async () => {\n    const data = await DataService.getDataTable(postPageNum);\n\n    if (data !== null) {\n      setTotalPageNum(data[\"meta\"][\"total_pages\"]);\n      setDataTableList(data[\"disasters\"].map(accident => {\n        const date = new Date(Date.parse(accident[\"happened_on\"].toString()));\n        return {\n          date: `${date.toLocaleString('ko-KR', dateFormatOption).slice(0, -1)}/${WEEKDAY[date.getDay()]}`,\n          deathCount: accident[\"death\"],\n          injuredCount: accident[\"injury\"],\n          district: accident[\"area\"],\n          accidentType: accident[\"category\"],\n          articleUrl: accident[\"url\"]\n        };\n      }));\n    }\n  }, [postPageNum]);\n  useEffect(() => {\n    initializeDataTableList();\n  }, []);\n  const headerList = [\"사고날짜/요일\", \"사망\", \"부상\", \"도시(행정구역)\", \"사고유형\", \"세부내용\"];\n  const dataPerPage = 10;\n  const updatePostPageNum = useCallback(newPageNum => {\n    setPostPageNum(newPageNum);\n  }, []);\n  const getLastPostPageNum = useCallback(() => {\n    return Math.floor(dataTableList.length / dataPerPage) + 1;\n  }, [dataTableList, dataPerPage]);\n  const currentDatas = useMemo(() => {\n    return dataTableList.slice((postPageNum - 1) * dataPerPage, postPageNum * dataPerPage);\n  }, [postPageNum, dataPerPage, dataTableList]);\n  return /*#__PURE__*/_jsxDEV(FlexColumn, {\n    children: [/*#__PURE__*/_jsxDEV(\"table\", {\n      className: styles[\"memorial-data-table\"],\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        className: styles[\"memorial-data-table--header\"],\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: styles[\"memorial-data-table--header-row\"],\n          children: headerList.map(text => /*#__PURE__*/_jsxDEV(\"th\", {\n            className: styles[\"memorial-data-table--header-cell\"],\n            children: text\n          }, `memorial-data-table-header-${text}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: currentDatas.map((data, idx) => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: Object.keys(data).map(key => /*#__PURE__*/_jsxDEV(DataTableRow, {\n            content: key === \"articleUrl\" ? /*#__PURE__*/_jsxDEV(\"a\", {\n              className: styles[\"memorial-data-table--body-link\"],\n              rel: \"noreferrer\",\n              target: \"_blank\",\n              href: data[key],\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: process.env.PUBLIC_URL + \"/assets/icon/ic-link.svg\",\n                alt: \"\\uAE30\\uC0AC \\uBCF4\\uB7EC\\uAC00\\uAE30\",\n                className: styles[\"memorial-data-table--body-link-icon\"]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 49\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 45\n            }, this) : `${data[key]}`\n          }, `memorial-data-table-r${idx}c${key}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 33\n          }, this))\n        }, `memorial-data-table-r${idx}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      style: styles[\"memorial-data-table--pagination__wrapper\"],\n      children: /*#__PURE__*/_jsxDEV(Pagination, {\n        onPageChange: updatePostPageNum,\n        lastPage: getLastPostPageNum(),\n        initialPageNum: postPageNum\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n};\n\n_s(MemorialDataTable, \"fBsS90VhkhjtQ0a3VEjkrPozwOg=\");\n\n_c = MemorialDataTable;\nexport default MemorialDataTable;\nexport const WEEKDAY = [\"일\", \"월\", \"화\", \"수\", \"목\", \"금\", \"토\"];\nexport const dateFormatOption = {\n  year: \"numeric\",\n  month: \"numeric\",\n  day: \"numeric\"\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"MemorialDataTable\");","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useState","DataTableRow","styles","FlexColumn","Pagination","Container","DataService","MemorialDataTable","postPageNum","setPostPageNum","totalPageNum","setTotalPageNum","perPage","dataTableList","setDataTableList","initializeDataTableList","data","getDataTable","map","accident","date","Date","parse","toString","toLocaleString","dateFormatOption","slice","WEEKDAY","getDay","deathCount","injuredCount","district","accidentType","articleUrl","headerList","dataPerPage","updatePostPageNum","newPageNum","getLastPostPageNum","Math","floor","length","currentDatas","text","idx","Object","keys","key","process","env","PUBLIC_URL","year","month","day"],"sources":["/home/swimmingkiim/Documents/Code-For-Korea/online-memorial/client/src/views/MemorialMainContent/MemorialInfomations/MemorialDataTable/index.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport DataTableRow from \"../../../../components/dataTable/DataTableRow\";\nimport styles from \"./style.module.css\";\nimport FlexColumn from \"../../../../components/common/FlexColumn\";\nimport Pagination from \"../../../../components/pagination/Pagination\";\nimport Container from \"../../../../components/common/Container\";\nimport DataService from \"../../../../services/data.service\";\n\ntype MemorialDataTableProps = {};\n\nexport type DataTableItem = {\n    date: string;\n    deathCount: number;\n    injuredCount: number;\n    district: string;\n    accidentType: string;\n    articleUrl: string;\n};\n\nexport type DataTableList = DataTableItem[];\n\nconst MemorialDataTable: React.FC<MemorialDataTableProps> = () => {\n    const [postPageNum, setPostPageNum] = useState<number>(1);\n    const [totalPageNum, setTotalPageNum] = useState<number>(1);\n    const perPage = 10;\n    const [dataTableList, setDataTableList] = useState<DataTableList>([]);\n\n    const initializeDataTableList = useCallback(async () => {\n        const data = await DataService.getDataTable(postPageNum);\n        if (data !== null) {\n            setTotalPageNum(data[\"meta\"][\"total_pages\"]);\n            setDataTableList(data[\"disasters\"].map((accident: { [key: string]: any }) => {\n                const date = new Date(Date.parse(accident[\"happened_on\"].toString()));\n                return {\n                    date: `${date.toLocaleString('ko-KR', dateFormatOption).slice(0, -1)}/${WEEKDAY[date.getDay()]}`,\n                    deathCount: accident[\"death\"],\n                    injuredCount: accident[\"injury\"],\n                    district: accident[\"area\"],\n                    accidentType: accident[\"category\"],\n                    articleUrl: accident[\"url\"],\n                };\n            }));\n        }\n    }, [postPageNum]);\n\n    useEffect(() => {\n        initializeDataTableList();\n    }, []);\n\n    const headerList = [\n        \"사고날짜/요일\",\n        \"사망\",\n        \"부상\",\n        \"도시(행정구역)\",\n        \"사고유형\",\n        \"세부내용\",\n    ];\n\n    const dataPerPage = 10;\n    const updatePostPageNum = useCallback((newPageNum: number) => {\n        setPostPageNum(newPageNum);\n    }, []);\n\n    const getLastPostPageNum = useCallback(() => {\n        return Math.floor(dataTableList.length / dataPerPage) + 1;\n    }, [dataTableList, dataPerPage]);\n\n    const currentDatas = useMemo(() => {\n        return dataTableList.slice(\n            (postPageNum - 1) * dataPerPage,\n            postPageNum * dataPerPage\n        );\n    }, [postPageNum, dataPerPage, dataTableList]);\n\n    return (\n        <FlexColumn>\n            <table className={styles[\"memorial-data-table\"]}>\n                <thead className={styles[\"memorial-data-table--header\"]}>\n                    <tr className={styles[\"memorial-data-table--header-row\"]}>\n                        {headerList.map((text) => (\n                            <th\n                                className={styles[\"memorial-data-table--header-cell\"]}\n                                key={`memorial-data-table-header-${text}`}\n                            >\n                                {text}\n                            </th>\n                        ))}\n                    </tr>\n                </thead>\n                <tbody>\n                    {currentDatas.map((data, idx) => (\n                        <tr key={`memorial-data-table-r${idx}`}>\n                            {Object.keys(data).map((key) => (\n                                <DataTableRow\n                                    key={`memorial-data-table-r${idx}c${key}`}\n                                    content={\n                                        key === \"articleUrl\" ? (\n                                            <a\n                                                className={styles[\"memorial-data-table--body-link\"]}\n                                                rel=\"noreferrer\"\n                                                target=\"_blank\"\n                                                href={data[key] as string}\n                                            >\n                                                <img\n                                                    src={process.env.PUBLIC_URL + \"/assets/icon/ic-link.svg\"}\n                                                    alt=\"기사 보러가기\"\n                                                    className={styles[\"memorial-data-table--body-link-icon\"]}\n                                                />\n                                            </a>\n                                        ) : `${data[key as keyof DataTableItem]}`}\n                                />\n                            ))}\n                        </tr>\n                    ))}\n                </tbody>\n            </table>\n            <Container style={styles[\"memorial-data-table--pagination__wrapper\"]}>\n                <Pagination\n                    onPageChange={updatePostPageNum}\n                    lastPage={getLastPostPageNum()}\n                    initialPageNum={postPageNum}\n                />\n            </Container>\n        </FlexColumn>\n    );\n};\n\nexport default MemorialDataTable;\n\nexport const WEEKDAY = [\"일\", \"월\", \"화\", \"수\", \"목\", \"금\", \"토\"];\n\nexport const dateFormatOption = {\n    year: \"numeric\",\n    month: \"numeric\",\n    day: \"numeric\",\n} as Intl.DateTimeFormatOptions;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}