{"ast":null,"code":"import _regeneratorRuntime from\"/home/swimmingkiim/Documents/Code-For-Korea/online-memorial/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/swimmingkiim/Documents/Code-For-Korea/online-memorial/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/swimmingkiim/Documents/Code-For-Korea/online-memorial/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useCallback,useEffect,useState}from\"react\";import FlexColumn from\"../../../components/common/FlexColumn\";import TextChunk from\"../../../components/common/TextChunk\";import Pagination from\"../../../components/pagination/Pagination\";import PostList from\"../../../components/post/PostList\";import PostService from\"../../../services/post.service\";import styles from\"./style.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MemorialPosts=function MemorialPosts(){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),postPageNum=_useState2[0],setPostPageNum=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),totalPageNum=_useState4[0],setTotalPageNum=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalPostNum=_useState6[0],setTotalPostNum=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),postList=_useState8[0],setPostList=_useState8[1];var initializePostList=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return PostService.getPost(postPageNum,10);case 2:data=_context.sent;if(data!==null){setTotalPageNum(data[\"meta\"][\"total_pages\"]);setTotalPostNum(data[\"meta\"][\"total_count\"]);setPostList(data[\"posts\"].map(function(post){return{id:post[\"id\"],body:post[\"body\"],name:post[\"name\"],createdAt:Date.parse(post[\"created_at\"]),updatedAt:Date.parse(post[\"updated_at\"])};}));}case 4:case\"end\":return _context.stop();}}},_callee);})),[postPageNum]);var updatePostPageNum=useCallback(function(newPageNum){setPostPageNum(newPageNum);},[]);useEffect(function(){initializePostList();},[postPageNum]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(FlexColumn,{style:styles[\"pagination\"],children:[/*#__PURE__*/_jsx(TextChunk,{content:\"\".concat(totalPostNum,\"\\uBA85\\uC774\\n\\uCD94\\uBAA8\\uD558\\uC168\\uC2B5\\uB2C8\\uB2E4\"),style:styles[\"pagination--text\"]}),/*#__PURE__*/_jsx(Pagination,{onPageChange:updatePostPageNum,lastPage:totalPageNum,initialPageNum:postPageNum})]}),/*#__PURE__*/_jsx(PostList,{postList:postList})]});};export default MemorialPosts;","map":null,"metadata":{},"sourceType":"module"}