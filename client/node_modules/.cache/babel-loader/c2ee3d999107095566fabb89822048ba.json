{"ast":null,"code":"import _regeneratorRuntime from\"/home/swimmingkiim/Documents/Code-For-Korea/online-memorial/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/swimmingkiim/Documents/Code-For-Korea/online-memorial/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/swimmingkiim/Documents/Code-For-Korea/online-memorial/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useCallback,useState}from\"react\";import MemorialTable from\"../../components/animation/MemorialTable\";import Button from\"../../components/common/Button\";import FlexColumn from\"../../components/common/FlexColumn\";import TextChunk from\"../../components/common/TextChunk\";import{LOCAL_STORAGE_KEY}from\"../../config/constant\";import PostService from\"../../services/post.service\";import AddPostModal from\"./AddPostModal\";import styles from\"./style.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MemorialAnimation=function MemorialAnimation(_ref){var count=_ref.count,_ref$year=_ref.year,year=_ref$year===void 0?new Date(Date.now()).getFullYear():_ref$year;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showAddPostModal=_useState2[0],setShowAddPostModal=_useState2[1];var memorialTextContent=\"\".concat(year,\"\\uB144, \\uC0B0\\uC5C5 \\uC7AC\\uD574\\uB85C \\uC778\\uD574\\n\\uC0AC\\uB9DD\\uD55C \\uBD84\\uB4E4\\uC758 \\uC22B\\uC790\\uC785\\uB2C8\\uB2E4\");var addPostButtonText=\"추모글 남기기\";var onClickAddPost=function onClickAddPost(_){setShowAddPostModal(true);};var onCloseModal=useCallback(function(){setShowAddPostModal(false);},[]);var onSubmitPost=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(name,text){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return PostService.createPost({name:name,body:text});case 2:result=_context.sent;localStorage.setItem(LOCAL_STORAGE_KEY,result[\"id\"].toString());case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}(),[]);return/*#__PURE__*/_jsxs(FlexColumn,{style:styles[\"memorial-animation--wrapper\"],children:[/*#__PURE__*/_jsx(MemorialTable,{}),/*#__PURE__*/_jsxs(FlexColumn,{style:styles[\"memorial-animation--subcontent-wrapper\"],children:[/*#__PURE__*/_jsx(TextChunk,{style:styles[\"memorial-animation--count\"],content:\"\".concat(count),isParagraph:true}),/*#__PURE__*/_jsx(TextChunk,{style:styles[\"memorial-animation--text\"],content:memorialTextContent}),/*#__PURE__*/_jsx(Button,{text:addPostButtonText,onClick:onClickAddPost,style:styles[\"memorial-animation--button\"]})]}),showAddPostModal&&/*#__PURE__*/_jsx(AddPostModal,{onSubmitPost:onSubmitPost,onCloseModal:onCloseModal})]});};export default MemorialAnimation;","map":null,"metadata":{},"sourceType":"module"}